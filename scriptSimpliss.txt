-- Database: ProjetoSimplissDB

-- DROP DATABASE IF EXISTS "ProjetoSimplissDB";

CREATE DATABASE "ProjetoSimplissDB"
    WITH
    OWNER = postgres
    ENCODING = 'UTF8'
    LC_COLLATE = 'Portuguese_Brazil.1252'
    LC_CTYPE = 'Portuguese_Brazil.1252'
    LOCALE_PROVIDER = 'libc'
    TABLESPACE = pg_default
    CONNECTION LIMIT = -1
    IS_TEMPLATE = False;

------------

-- SCHEMA: public

-- DROP SCHEMA IF EXISTS public ;

CREATE SCHEMA IF NOT EXISTS public
    AUTHORIZATION pg_database_owner;

COMMENT ON SCHEMA public
    IS 'standard public schema';

GRANT USAGE ON SCHEMA public TO PUBLIC;

GRANT ALL ON SCHEMA public TO pg_database_owner;

-----------

-- SEQUENCE: public.Beneficios_Id_seq

-- DROP SEQUENCE IF EXISTS public."Beneficios_Id_seq";

CREATE SEQUENCE IF NOT EXISTS public."Beneficios_Id_seq"
    INCREMENT 1
    START 1
    MINVALUE 1
    MAXVALUE 2147483647
    CACHE 1;

ALTER SEQUENCE public."Beneficios_Id_seq"
    OWNER TO postgres;

---------

-- SEQUENCE: public.ContribuintesBeneficios_Id_seq

-- DROP SEQUENCE IF EXISTS public."ContribuintesBeneficios_Id_seq";

CREATE SEQUENCE IF NOT EXISTS public."ContribuintesBeneficios_Id_seq"
    INCREMENT 1
    START 1
    MINVALUE 1
    MAXVALUE 2147483647
    CACHE 1;

ALTER SEQUENCE public."ContribuintesBeneficios_Id_seq"
    OWNER TO postgres;

-----------

-- SEQUENCE: public.Contribuintes_Id_seq

-- DROP SEQUENCE IF EXISTS public."Contribuintes_Id_seq";

CREATE SEQUENCE IF NOT EXISTS public."Contribuintes_Id_seq"
    INCREMENT 1
    START 1
    MINVALUE 1
    MAXVALUE 2147483647
    CACHE 1;

ALTER SEQUENCE public."Contribuintes_Id_seq"
    OWNER TO postgres;

-------------

-- Table: public.Beneficios

-- DROP TABLE IF EXISTS public."Beneficios";

CREATE TABLE IF NOT EXISTS public."Beneficios"
(
    "Id" integer NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    "NomeBeneficio" text COLLATE pg_catalog."default",
    "PorcentagemDesconto" double precision NOT NULL,
    CONSTRAINT "PK_Beneficios" PRIMARY KEY ("Id")
)

TABLESPACE pg_default;

ALTER TABLE IF EXISTS public."Beneficios"
    OWNER to postgres;

--------------

-- Table: public.Contribuintes

-- DROP TABLE IF EXISTS public."Contribuintes";

CREATE TABLE IF NOT EXISTS public."Contribuintes"
(
    "Id" integer NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    "CNPJ" text COLLATE pg_catalog."default" NOT NULL,
    "RazaoSocial" text COLLATE pg_catalog."default" NOT NULL,
    "DataAbertura" timestamp with time zone NOT NULL,
    "RegimeTributacao" text COLLATE pg_catalog."default" NOT NULL,
    "BeneficioId" integer NOT NULL,
    CONSTRAINT "PK_Contribuintes" PRIMARY KEY ("Id")
)

TABLESPACE pg_default;

ALTER TABLE IF EXISTS public."Contribuintes"
    OWNER to postgres;

------------

-- Table: public.ContribuintesBeneficios

-- DROP TABLE IF EXISTS public."ContribuintesBeneficios";

CREATE TABLE IF NOT EXISTS public."ContribuintesBeneficios"
(
    "Id" integer NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    "ContribuinteId" integer NOT NULL,
    "BeneficioId" integer NOT NULL,
    "DataVinculo" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_ContribuintesBeneficios" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_ContribuintesBeneficios_Beneficios_BeneficioId" FOREIGN KEY ("BeneficioId")
        REFERENCES public."Beneficios" ("Id") MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE CASCADE,
    CONSTRAINT "FK_ContribuintesBeneficios_Contribuintes_ContribuinteId" FOREIGN KEY ("ContribuinteId")
        REFERENCES public."Contribuintes" ("Id") MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE CASCADE
)

TABLESPACE pg_default;

ALTER TABLE IF EXISTS public."ContribuintesBeneficios"
    OWNER to postgres;
-- Index: IX_ContribuintesBeneficios_BeneficioId

-- DROP INDEX IF EXISTS public."IX_ContribuintesBeneficios_BeneficioId";

CREATE INDEX IF NOT EXISTS "IX_ContribuintesBeneficios_BeneficioId"
    ON public."ContribuintesBeneficios" USING btree
    ("BeneficioId" ASC NULLS LAST)
    TABLESPACE pg_default;
-- Index: IX_ContribuintesBeneficios_ContribuinteId

-- DROP INDEX IF EXISTS public."IX_ContribuintesBeneficios_ContribuinteId";

CREATE INDEX IF NOT EXISTS "IX_ContribuintesBeneficios_ContribuinteId"
    ON public."ContribuintesBeneficios" USING btree
    ("ContribuinteId" ASC NULLS LAST)
    TABLESPACE pg_default;

--------------

-- Table: public.__EFMigrationsHistory

-- DROP TABLE IF EXISTS public."__EFMigrationsHistory";

CREATE TABLE IF NOT EXISTS public."__EFMigrationsHistory"
(
    "MigrationId" character varying(150) COLLATE pg_catalog."default" NOT NULL,
    "ProductVersion" character varying(32) COLLATE pg_catalog."default" NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
)

TABLESPACE pg_default;

ALTER TABLE IF EXISTS public."__EFMigrationsHistory"
    OWNER to postgres;